import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { HttpClientModule } from '@angular/common/http';
import { ReactiveFormsModule } from '@angular/forms';
import { RouterModule } from '@angular/router';
import { JwtModule } from '@auth0/angular-jwt';

import { AppComponent } from './app.component';

export function tokenGetter() {
  return localStorage.getItem('token');
}

@NgModule({
  imports: [
    BrowserModule,
    HttpClientModule,
    ReactiveFormsModule,
    JwtModule.forRoot({
      config: {
        tokenGetter: tokenGetter,
        allowedDomains: ['localhost:5089'],
        disallowedRoutes: []
      }
    }),
    RouterModule.forRoot([
      { path: '', loadComponent: () => import('./components/landing/landing.component').then(m => m.LandingComponent) },
      { path: 'restaurants', loadComponent: () => import('./components/restaurant-list/restaurant-list.component').then(m => m.RestaurantListComponent) },
      { path: 'restaurants/:id', loadComponent: () => import('./components/restaurant-details/restaurant-details.component').then(m => m.RestaurantDetailsComponent) },
      { path: 'cart', loadComponent: () => import('./components/cart/cart.component').then(m => m.CartComponent) },
      { path: 'orders', loadComponent: () => import('./components/order/order.component').then(m => m.OrderComponent) },
      { path: 'login', loadComponent: () => import('./components/user-login/user-login.component').then(m => m.UserLoginComponent) },
      { path: 'register', loadComponent: () => import('./components/user-register/user-register.component').then(m => m.UserRegisterComponent) },
      { path: '**', redirectTo: '' }
    ])
  ],
  providers: []
})
export class AppModule { }
